<!-- Singleâ€‘file TastyTales POS Web App (App Script Ready) -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>TastyTales POS</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  body { font-family: Arial, sans-serif; margin: 0; padding: 0; background:#fafafa; }
  header { text-align:center; padding:20px; background:white; box-shadow:0 2px 4px rgba(0,0,0,0.1); }
  header img { width:150px; }
  h1 { margin:10px 0 0 0; font-size:24px; }
  main { padding:20px; max-width:500px; margin:auto; }
  .item { display:flex; justify-content:space-between; padding:10px 0; }
  input { width:90px; font-size:16px; }
  .totalBox { margin-top:20px; padding:15px; background:white; border-radius:8px; box-shadow:0 1px 3px rgba(0,0,0,0.1); }
  button { width:100%; margin-top:20px; padding:15px; background:#ff7f3f; color:white; border:none; font-size:18px; border-radius:6px; }
  #qrScreen { display:none; text-align:center; padding:40px; }
</style>
</head>
<body>
<header>
  <img id="logo" src="" alt="Logo" />
  <h1>TastyTales POS</h1>
</header>
<main id="mainScreen">
  <div class="item"><span>Soup</span><input type="number" id="qtySoup" value="0" min="0"></div>
  <div class="item"><span>Potato</span><input type="number" id="qtyPotato" value="0" min="0"></div>
  <div class="item"><span>Beer</span><input type="number" id="qtyBeer" value="0" min="0"></div>
  
  <div class="totalBox">
    <div class="item"><span>Total</span><span id="total">0</span> yen</div>
    <div class="item"><span>Deposit</span><input type="number" id="deposit" value="0"></div>
    <div class="item"><span>Change</span><span id="change">0</span> yen</div>
  </div>
  <button id="payBtn">Complete Payment</button>
</main>

<div id="qrScreen">
  <h2>Receipt</h2>
  <div id="qrcode"></div>
  <button onclick="location.reload()">Done</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script>
// ====== SETTINGS ======
const PRICE = { soup:300, potato:400, beer:500 };
const API_URL = "__PASTE_YOUR_WEBAPP_URL__";
const LOGO_BASE64 = "__PASTE_BASE64_LOGO__";

// Put logo
document.getElementById("logo").src = LOGO_BASE64;

// ====== REALTIME TOTAL UPDATE ======
function updateTotal(){
  const s = +qtySoup.value;
  const p = +qtyPotato.value;
  const b = +qtyBeer.value;
  const total = s*PRICE.soup + p*PRICE.potato + b*PRICE.beer;
  totalEl.textContent = total;
  const dep = +deposit.value;
  changeEl.textContent = dep - total;
}

const qtySoup = document.getElementById("qtySoup");
const qtyPotato = document.getElementById("qtyPotato");
const qtyBeer = document.getElementById("qtyBeer");
const deposit = document.getElementById("deposit");
const totalEl = document.getElementById("total");
const changeEl = document.getElementById("change");

[qtySoup, qtyPotato, qtyBeer, deposit].forEach(i=> i.addEventListener("input", updateTotal));

// ====== PAYMENT ======
document.getElementById("payBtn").onclick = ()=>{
  const payload = {
    soup:+qtySoup.value,
    potato:+qtyPotato.value,
    beer:+qtyBeer.value,
    total:+totalEl.textContent
  };

  fetch(API_URL,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify(payload)
  })
  .then(r=>r.text())
  .then(url=>{
    mainScreen.style.display="none";
    qrScreen.style.display="block";
    new QRCode(document.getElementById("qrcode"),url);
  })
  .catch(e=>alert("Failed: "+e));
};
</script>
</body>
</html>
